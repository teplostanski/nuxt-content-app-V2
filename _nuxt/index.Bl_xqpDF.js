import{n as l,c as u,a as r,u as s,o as d}from"./entry.BvmtTspR.js";function p(){return{authenticateWithGitHub:()=>{const i="https://github.com/login/oauth/authorize?client_id=6b23ac4984f4163d5509&redirect_uri=https://blog.teplostanski.dev/&scope=repo&response_type=code";window.location.href=i},handleGitHubCallback:()=>{const n=new URLSearchParams(window.location.search).get("code");if(!n){console.error("Authorization code not found");return}const t="https://cors-anywhere.herokuapp.com/";fetch(`${t}https://github.com/login/oauth/access_token`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({client_id:"6b23ac4984f4163d5509",client_secret:"c41cd92f37d42c29a4b9cc6e779c2c086a0f382d",code:n,redirect_uri:"https://blog.teplostanski.dev/"})}).then(e=>e.json()).then(e=>{const a=e.access_token;console.log("Access Token:",a),fetch(`${t}https://api.github.com/repos/teplostanski/uncrunch`,{headers:{Authorization:`token ${a}`}}).then(o=>o.json()).then(o=>{console.log("Repository Data:",o)}).catch(o=>{console.error("Failed to fetch repository data:",o)})}).catch(e=>{console.error("Failed to get GitHub access token:",e)})}}}const b=r("h1",null,"Welcome to My App",-1),g={__name:"index",setup(h){const c=p();return l(()=>{c.handleGitHubCallback()}),(n,t)=>(d(),u("div",null,[b,r("button",{onClick:t[0]||(t[0]=(...i)=>s(c).authenticateWithGitHub&&s(c).authenticateWithGitHub(...i))},"Authenticate with GitHub")]))}};export{g as default};
